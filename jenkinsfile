pipeline {
    agent { label 'slave-1' }
  stages {
      stage ('clean workspace') {
       steps {
          sh 'rm -rf hello-world-war'
       }
         }
       stage ('checkout') {
           steps {
               sh 'git clone https://github.com/sonyhl05/hello-world-war/'
           }
       }
        stage ('build') {
          steps {
              sh '''
                cd hello-world-war
                pwd
                mvn clean package
            '''
          }
       }
       stage ('deploy') {
           steps {
               sh 'scp hello-world-war/target/*.war root@172-31-42-126:/opt/apache-tomcat-10.1.34/webapps/'
           }
       }
   }
   post{
       success{
           echo "Build is success"
           sh 'echo " Build is Success " | mail -s "Build Success"  daisychandanagmail.com'
       }
       failure{
           echo "Build failed"
           sh 'echo " Build failed " | mail -s "Check logs"  daisychandanagmail.com'
       }
   }
}
